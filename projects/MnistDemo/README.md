# Introduction

This is a simple WinForm application for recognizing handwritten digit.

This application used MNIST database for model training and VS Tools for AI for creating model inference library. 




# Getting Started

First, double click the **MnistDemo.sln** to in  open the solution.

In this solution, there are three projects.
- **MNIST** is exactly the project in **\samples-for-ai.git\examples\tensorflow\MNIST**, you can run the code to train your own model easily without open another solution. 
- **MNISTModelLibrary** is a model inference library, the code was automatic generated by import the model trained before. 
- **MNIST.App** is project of the winform application which can recognize handwritten digit. This project refered the **MNISTModelLibrary** for handwritten digit recognition.  


## 1. Run the Application with Pre-built Model Inference Library

Press **F5** to run application directly.

You can write digit with your mouse moving and left button pressed.

When the left button released, the program will get the picture, send it for inference and show the prediction.

You can click **Erase** button to clear the panel and start to write a new digit.


## 2. Train Your Own Model

Right click on the **MNIST**, choose **Set as StartUp Project**.

Then, right click on the **mnist.py**, choose **Start without Debugging** to run the code. 

After the program finishes running, right click on the **MNIST** again, choose **Open Folder in File Explorer**.

You can see there are three new folder in this directory.
- input: contains the training and test data download at the beginning of the program running.
- output: contains the Checkpoint .meta files generated during the training.
- export: contains the SavedModel .pb files generated after the training.

## 3. Run the Application with Model Inference Library Created by Your Own

After training, you now have the Checkpoint .meta files and SavedModel .pb files. You can create a Model Inference Library using these files.


You can read this tutorial to know how to [Generate code from trained models](https://github.com/Microsoft/vs-tools-for-ai/blob/master/docs/model-inference.md).

Chinese version: [从训练好的模型生成代码](https://github.com/Microsoft/vs-tools-for-ai/blob/master/docs/zh-hans/docs/model-inference.md)


Steps to do:

1. In current situation, you should **add a new project** in solution 'MnistDemo' using the Model Inference Library template instead of create a new solution.
2. After the code generated, right click on the **References** in **MNIST.App**, choose **Add Reference**.
3. In **Projects**, select the project you created.
4. Click on **MainWindow.cs**, press **F7** to view code.
5. Change the code in line 11 and line 24 to the Inference Library you created.

```c#
...
11    using MNISTModelLibrary; // reference MNISTModelLibrary
...
24    private Mnist model;// MNIST model
...
```

6. Press **F5** to run the MNIST.App again, now you can check it yourself.
